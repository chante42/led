<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}.c33{border-right-style:solid;padding:0pt 5pt 0pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;width:18.2pt;border-top-color:#000000;border-bottom-style:solid}.c29{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#d9d9d9;border-left-style:solid;border-bottom-width:1pt;width:451.4pt;border-top-color:#000000;border-bottom-style:solid}.c18{border-right-style:solid;padding:0pt 5pt 0pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:433.1pt;border-top-color:#000000;border-bottom-style:solid}.c12{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:225.7pt;border-top-color:#000000;border-bottom-style:solid}.c0{background-color:#d9d9d9;color:#000000;font-weight:normal;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Courier New";font-style:normal}.c26{background-color:#ffffff;color:#444444;font-weight:normal;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Verdana";font-style:normal}.c22{background-color:#eaecff;color:#000000;font-weight:normal;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Verdana";font-style:normal}.c2{color:#000000;font-weight:normal;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;direction:ltr}.c4{margin-left:18pt;orphans:2;widows:2;direction:ltr}.c15{background-color:#ffffff;font-size:10.5pt;color:#333333;font-weight:bold}.c10{page-break-after:avoid;orphans:2;widows:2;direction:ltr}.c6{margin-left:36pt;orphans:2;widows:2;direction:ltr}.c32{background-color:#ffffff;font-size:19.5pt;color:#0091c7;font-weight:bold}.c20{padding-top:9pt;padding-bottom:9pt;line-height:1.15;text-align:center}.c3{orphans:2;widows:2;direction:ltr;height:11pt}.c24{padding-top:9pt;padding-bottom:9pt;line-height:1.15;text-align:left}.c14{background-color:#ffffff;font-size:10.5pt;color:#005e81}.c13{orphans:2;widows:2;direction:ltr}.c8{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c21{line-height:1.0;text-align:left;direction:ltr}.c30{background-color:#ffffff;font-size:11pt;font-weight:bold}.c7{background-color:#ffffff;font-size:10.5pt;color:#444444}.c9{border-collapse:collapse;margin-right:auto}.c23{background-color:#d9d9d9;font-family:"Courier New"}.c16{padding-top:0pt;padding-bottom:0pt}.c11{color:#1155cc;text-decoration:underline}.c25{line-height:1.5;text-align:justify}.c17{color:inherit;text-decoration:inherit}.c19{height:0pt}.c27{font-size:8pt}.c28{text-align:center}.c5{height:11pt}.c31{height:16pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c8"><p class="c10 c28 title"><a name="h.iv1lzlye12b6"></a><span>Pilotage Led 8x8 par Arduino Nano </span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c4"><span class="c11"><a class="c17" href="#h.s4k9gg2yzqu7">R&eacute;sultat</a></span></p><p class="c4"><span class="c11"><a class="c17" href="#h.vuyml75x4v12">Montage &eacute;lectronique</a></span></p><p class="c6"><span class="c11"><a class="c17" href="#h.tbeyxqd4yasw">Mat&eacute;riel :</a></span></p><p class="c6"><span class="c11"><a class="c17" href="#h.mh4awwx7eomv">Cadre en bois :</a></span></p><p class="c6"><span class="c11"><a class="c17" href="#h.3enumwountqb">C&acirc;blage sur Arduino nano</a></span></p><p class="c4"><span class="c11"><a class="c17" href="#h.4i3xo1wq5j09">Script PowerShell :</a></span></p><p class="c6"><span class="c11"><a class="c17" href="#h.ow0nhie5amzo">Il faut autoriser les scripts non sign&eacute;s :</a></span></p><p class="c6"><span class="c11"><a class="c17" href="#h.t87b59242big">Ex&eacute;cutez la console PowerShell</a></span></p><p class="c6"><span class="c11"><a class="c17" href="#h.rpdl1zysupes">Script de pilotage</a></span></p><p class="c4"><span class="c11"><a class="c17" href="#h.ny5z5e7bue4l">Script Arduino</a></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><h1 class="c10"><a name="h.s4k9gg2yzqu7"></a><span>R&eacute;sultat</span></h1><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 338.67px;"><img alt="20151115_183939.jpg" src="images/image01.jpg" style="width: 601.70px; height: 338.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h1 class="c10"><a name="h.vuyml75x4v12"></a><span>Montage &eacute;lectronique </span></h1><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 338.67px;"><img alt="20151111_180643.jpg" src="images/image00.jpg" style="width: 601.70px; height: 338.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 338.67px;"><img alt="20151115_184043.jpg" src="images/image03.jpg" style="width: 601.70px; height: 338.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><h2 class="c10"><a name="h.tbeyxqd4yasw"></a><span>Mat&eacute;riel :</span></h2><p class="c3"><span></span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 153.50px; height: 153.50px;"><img alt="" src="images/image04.png" style="width: 153.50px; height: 153.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span>&nbsp;3,5 &euro; piece chez miniinthebox </span><span class="c11"><a class="c17" href="https://www.google.com/url?q=http://www.miniinthebox.com/fr/max7219-matricielle-8-8-en-serie-interface-huit-chiffres-a-conduit-pilote-d-affichage-pour-arduino_p2816965.html)&amp;sa=D&amp;usg=AFQjCNG20aDSbdQ2TCuogwMzRLHjVSQ91g">(http://www.miniinthebox.com/fr/max7219-matricielle-8-8-en-serie-interface-huit-chiffres-a-conduit-pilote-d-affichage-pour-arduino_p2816965.html)</a></span></p><h2 class="c10"><a name="h.mh4awwx7eomv"></a><span>Cadre en bois :</span></h2><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 226.67px;"><img alt="" src="images/image02.png" style="width: 601.70px; height: 226.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c10"><a name="h.3enumwountqb"></a><span>C&acirc;blage sur Arduino nano</span></h2><p class="c3"><span></span></p><p class="c13"><span>En 5 volt sur l&rsquo;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arduino Nano:</span></p><p class="c3"><span></span></p><a href="#" name="dfd84556219ad9e9187f9e5161378256a3c1a353"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c19"><td class="c12" colspan="1" rowspan="1"><p class="c21 c16"><span class="c2">Arduino UNO</span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c21 c16"><span class="c2">1 er Matrice Led 8 x 8</span></p></td></tr><tr class="c19"><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">pin 2 &nbsp;: GND &nbsp;(rouge) </span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">GND</span></p></td></tr><tr class="c19"><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">pin 4 : 5V &nbsp;(Maron) </span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c21 c16"><span class="c2">VCC</span></p></td></tr><tr class="c19"><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">pin &nbsp;D10 (Orange) </span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">DIN : DataIn of the first led matrix module</span></p></td></tr><tr class="c19"><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">pin &nbsp;D11 (Jaune) </span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">CLK of the first led matrix module</span></p></td></tr><tr class="c19"><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">pin &nbsp;D12 (vert) </span></p></td><td class="c12" colspan="1" rowspan="1"><p class="c1"><span class="c2">CS of the first led matrix module</span></p></td></tr></tbody></table><p class="c3"><span></span></p><p class="c3"><span></span></p><h1 class="c10"><a name="h.4i3xo1wq5j09"></a><span>Script PowerShell :</span></h1><h2 class="c10"><a name="h.ow0nhie5amzo"></a><span>Il faut autoriser les scripts non sign&eacute;s :</span></h2><p class="c13"><span>&nbsp; </span><span class="c11"><a class="c17" href="https://www.google.com/url?q=http://www.it-connect.fr/autoriser-lexecution-de-scripts-powershell/&amp;sa=D&amp;usg=AFQjCNHYaq1HZtQavPzakXlprk6slwL5TA">http://www.it-connect.fr/autoriser-lexecution-de-scripts-powershell/</a></span></p><h2 class="c13 c16 c31"><a name="h.95d0qbk6ripc"></a></h2><h2 class="c13 c16"><a name="h.t87b59242big"></a><span class="c30">Ex&eacute;cutez la console PowerShell</span></h2><p class="c13 c25"><span class="c7">Cliquez sur &ldquo;</span><span class="c15">D&eacute;marrer</span><span class="c7">&rdquo; puis saisissez &ldquo;</span><span class="c15">powershell</span><span class="c7">&ldquo;, faites clic droit sur &ldquo;</span><span class="c15">Windows PowerShell</span><span class="c7">&rdquo; et cliquez sur &ldquo;</span><span class="c15">Ex&eacute;cuter en tant qu&rsquo;Administrateur</span><span class="c7">&rdquo; pour disposez des privil&egrave;ges suffisants permettant de modifier le </span><span class="c14"><a class="c17" href="https://www.google.com/url?q=http://www.it-connect.fr/cours-tutoriels/administration-systemes/windows-server/systeme/&amp;sa=D&amp;usg=AFQjCNGpkPZ_lqvhmAgCfQNFTji3Tgotgg">syst&egrave;me</a></span><span class="c7">. Si vous utilisez un </span><span class="c14"><a class="c17" href="https://www.google.com/url?q=http://www.it-connect.fr/cours-tutoriels/administration-systemes/linux/linux-systeme/&amp;sa=D&amp;usg=AFQjCNFAOMRrJbKYAXtAj5rCuVOzNup5uA">syst&egrave;me</a></span><span class="c7">&nbsp;64 bits, les deux versions de la console appara&icirc;tront.</span></p><p class="c13 c25"><span class="c7">Utilisez la commande suivante :</span></p><a href="#" name="6d044563786cd6bdd681576301879cc80b39c9b7"></a><a href="#" name="1"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c19"><td class="c33" colspan="1" rowspan="1"><p class="c13 c20"><span class="c26">1</span></p></td><td class="c18" colspan="1" rowspan="1"><p class="c13 c24"><span class="c22">Set-ExecutionPolicy Unrestricted</span></p></td></tr></tbody></table><p class="c13 c25"><span class="c7">Lorsqu&rsquo;on vous demande de confirmer la modification, indiquez &ldquo;</span><span class="c15">O</span><span class="c7">&rdquo; pour Oui et appuyez sur </span><span class="c15">Entr&eacute;e</span><span class="c7">.</span></p><p class="c3"><span></span></p><h2 class="c10"><a name="h.rpdl1zysupes"></a><span>&nbsp;Script de pilotage </span></h2><a href="#" name="68b380eda5570ac7c898910d17d89aae2d7356e8"></a><a href="#" name="2"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c19"><td class="c29" colspan="1" rowspan="1"><p class="c1"><span class="c2">$port= new-Object System.IO.Ports.SerialPort COM15,9600,None,8,one</span></p><p class="c1"><span class="c2">$port.Open()</span></p><p class="c1"><span class="c2">$port.WriteLine($args[0])</span></p><p class="c1"><span class="c2">$port.ReadLine()</span></p><p class="c1"><span class="c2">$port.Close()</span></p></td></tr></tbody></table><p class="c3"><span></span></p><h1 class="c10"><a name="h.ny5z5e7bue4l"></a><span>Script Arduino </span></h1><p class="c3"><span class="c23 c27"></span></p><a href="#" name="201d6fa5cc5a536de2a609c7585408d9b65014d0"></a><a href="#" name="3"></a><table cellpadding="0" cellspacing="0" class="c9"><tbody><tr class="c19"><td class="c29" colspan="1" rowspan="1"><p class="c1"><span class="c0">// http://www.instructables.com/id/Easy-bluetooth-controlled-scrolling-text/?ALLSTEPS</span></p><p class="c1"><span class="c0">// Easy serial controlled scrolling text</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">// by Yoruk for Instructable</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">// 26 02 15 : first code</span></p><p class="c1"><span class="c0">// 03 03 15 : buffer updating</span></p><p class="c1"><span class="c0">// 04 03 15 : faster version, both buffers</span></p><p class="c1"><span class="c0">// 05 03 15 : cleaning and help</span></p><p class="c1"><span class="c0">// 15 11 15 : Olivier Chanteloup : gestion des option de pilotage et </span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">/*</span></p><p class="c1"><span class="c0">WIRING :</span></p><p class="c1"><span class="c0">&nbsp;pin 12 - DataIn of the first led matrix module</span></p><p class="c1"><span class="c0">&nbsp;pin 11 - CLK of the first led matrix module</span></p><p class="c1"><span class="c0">&nbsp;pin 10 - CS of the first led matrix module</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp;5V : 5v of the matrix module, 5v of the bluetooth module</span></p><p class="c1"><span class="c0">&nbsp;GND : the two GND signals of the matrix modules and the bluetooth module</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp;WARNING : Use a 3v3 arduino card (nano...) or a level converter !!!</span></p><p class="c1"><span class="c0">&nbsp;Wire the matrix modules in serie. See the Instructable steps.</span></p><p class="c1"><span class="c0">&nbsp;*/</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">//Librairie for the LEDs matrix</span></p><p class="c1"><span class="c0">#include &quot;LedControl.h&quot;</span></p><p class="c1"><span class="c0">#include &lt;avr/pgmspace.h&gt;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">//How many matrixes we have ?</span></p><p class="c1"><span class="c0">byte MatrixNumber = 8;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">// the delay between each screen display (ms)</span></p><p class="c1"><span class="c0">int SpeedDelay = 100;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">const int BufferLen = 700; // 700</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">char incomingByte; //incoming data from the link</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">//char &nbsp;scrollText[] = &quot;Test Olivier &quot;;</span></p><p class="c1"><span class="c0">char &nbsp;scrollText[] = &quot;1GABRIEL CHANTELOUP 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \0&quot;;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">//total string lenght.</span></p><p class="c1"><span class="c0">int LongueurChaine = strlen(scrollText);</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">// the two pixels arrays</span></p><p class="c1"><span class="c0">char Buffer[BufferLen]; &nbsp; //contient tout les pixels de TOUTE LA PHRASE</span></p><p class="c1"><span class="c0">//char Buffer_inverse[BufferLen]; //contient tout les pixels de TOUTE LA PHRASE, mais symetrises pour affichage sur ecran inverses</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">// the message array</span></p><p class="c1"><span class="c0">char Phrase[50];</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">// permet lors des changement de vitesse de defilement de continue le message la ou il &eacute;tait</span></p><p class="c1"><span class="c0">int RememberK = 0;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">//here we set up the led matrix</span></p><p class="c1"><span class="c0">LedControl lc = LedControl(12, 11, 10, MatrixNumber);</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">// character lib</span></p><p class="c1"><span class="c0">const byte fontDefinitions[480] = {</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0x00, 0x00, 0x00,/*space*/ // is 32 in ASCII</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0xF6, 0xF6, 0x00, 0x00, /*!*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0xE0, 0x00, 0xE0, 0x00, /*&quot;*/</span></p><p class="c1"><span class="c0">&nbsp; 0x28, 0xFE, 0x28, 0xFE, 0x28, /*#*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x64, 0xD6, 0x54, 0x08, /*$*/</span></p><p class="c1"><span class="c0">&nbsp; 0xC2, 0xCC, 0x10, 0x26, 0xC6, /*%*/</span></p><p class="c1"><span class="c0">&nbsp; 0x4C, 0xB2, 0x92, 0x6C, 0x0A, /*&amp;*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0xE0, 0x00, 0x00, /*&#39;*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x38, 0x44, 0x82, 0x00, /*(*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x82, 0x44, 0x38, 0x00, /*)*/</span></p><p class="c1"><span class="c0">&nbsp; 0x88, 0x50, 0xF8, 0x50, 0x88, /***/</span></p><p class="c1"><span class="c0">&nbsp; 0x08, 0x08, 0x3E, 0x08, 0x08, /*+*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0x05, 0x06, 0x00, /*,*/</span></p><p class="c1"><span class="c0">&nbsp; 0x08, 0x08, 0x08, 0x08, 0x08, /*-*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0x06, 0x06, 0x00, /*.*/</span></p><p class="c1"><span class="c0">&nbsp; 0x02, 0x0C, 0x10, 0x60, 0x80, /*/*/</span></p><p class="c1"><span class="c0">&nbsp; 0x7C, 0x8A, 0x92, 0xA2, 0x7C, /*0*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x42, 0xFE, 0x02, 0x00, /*1*/</span></p><p class="c1"><span class="c0">&nbsp; 0x42, 0x86, 0x8A, 0x92, 0x62, /*2*/</span></p><p class="c1"><span class="c0">&nbsp; 0x44, 0x82, 0x92, 0x92, 0x6C, /*3*/</span></p><p class="c1"><span class="c0">&nbsp; 0x10, 0x30, 0x50, 0xFE, 0x10, /*4*/</span></p><p class="c1"><span class="c0">&nbsp; 0xE4, 0xA2, 0xA2, 0xA2, 0x9C, /*5*/</span></p><p class="c1"><span class="c0">&nbsp; 0x3C, 0x52, 0x92, 0x92, 0x0C, /*6*/</span></p><p class="c1"><span class="c0">&nbsp; 0x80, 0x86, 0x98, 0xE0, 0x80, /*7*/</span></p><p class="c1"><span class="c0">&nbsp; 0x6C, 0x92, 0x92, 0x92, 0x6C, /*8*/</span></p><p class="c1"><span class="c0">&nbsp; 0x60, 0x92, 0x92, 0x94, 0x78, /*9*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0x36, 0x36, 0x00, /*:*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0x35, 0x36, 0x00, /*;*/</span></p><p class="c1"><span class="c0">&nbsp; 0x10, 0x28, 0x44, 0x82, 0x00, /*&lt;*/</span></p><p class="c1"><span class="c0">&nbsp; 0x28, 0x28, 0x28, 0x28, 0x28, /*=*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x82, 0x44, 0x28, 0x10, /*&gt;*/</span></p><p class="c1"><span class="c0">&nbsp; 0x40, 0x80, 0x8A, 0x90, 0x60, /*?*/</span></p><p class="c1"><span class="c0">&nbsp; 0x7C, 0x82, 0xBA, 0xBA, 0x62, /*@*/</span></p><p class="c1"><span class="c0">&nbsp; 0x3E, 0x48, 0x88, 0x48, 0x3E, /*A*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x92, 0x92, 0x92, 0x6C, /*B*/</span></p><p class="c1"><span class="c0">&nbsp; 0x7C, 0x82, 0x82, 0x82, 0x44, /*C*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x82, 0x82, 0x82, 0x7C, /*D*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x92, 0x92, 0x92, 0x82, /*E*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x90, 0x90, 0x90, 0x80, /*F*/</span></p><p class="c1"><span class="c0">&nbsp; 0x7C, 0x82, 0x82, 0x8A, 0x4E, /*G*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x10, 0x10, 0x10, 0xFE, /*H*/</span></p><p class="c1"><span class="c0">&nbsp; 0x82, 0x82, 0xFE, 0x82, 0x82, /*I*/</span></p><p class="c1"><span class="c0">&nbsp; 0x84, 0x82, 0xFC, 0x80, 0x80, /*J*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x10, 0x28, 0x44, 0x82, /*K*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x02, 0x02, 0x02, 0x02, /*L*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x40, 0x20, 0x40, 0xFE, /*M*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x60, 0x10, 0x0C, 0xFE, /*N*/</span></p><p class="c1"><span class="c0">&nbsp; 0x7C, 0x82, 0x82, 0x82, 0x7C, /*O*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x90, 0x90, 0x90, 0x60, /*P*/</span></p><p class="c1"><span class="c0">&nbsp; 0x7C, 0x82, 0x82, 0x86, 0x7E, /*Q*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x90, 0x98, 0x94, 0x62, /*R*/</span></p><p class="c1"><span class="c0">&nbsp; 0x64, 0x92, 0x92, 0x92, 0x4C, /*S*/</span></p><p class="c1"><span class="c0">&nbsp; 0x80, 0x80, 0xFE, 0x80, 0x80, /*T*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFC, 0x02, 0x02, 0x02, 0xFC, /*U*/</span></p><p class="c1"><span class="c0">&nbsp; 0xF8, 0x04, 0x02, 0x04, 0xF8, /*V*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFC, 0x02, 0x0C, 0x02, 0xFC, /*W*/</span></p><p class="c1"><span class="c0">&nbsp; 0xC6, 0x28, 0x10, 0x28, 0xC6, /*X*/</span></p><p class="c1"><span class="c0">&nbsp; 0xC0, 0x20, 0x1E, 0x20, 0xC0, /*Y*/</span></p><p class="c1"><span class="c0">&nbsp; 0x86, 0x8A, 0x92, 0xA2, 0xC2, /*Z*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0xFE, 0x82, 0x00, /*[*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0x00, 0x00, 0x00, /*this should be / */</span></p><p class="c1"><span class="c0">&nbsp; 0x80, 0x60, 0x10, 0x0C, 0x02, /*]*/</span></p><p class="c1"><span class="c0">&nbsp; 0x20, 0x40, 0x80, 0x40, 0x20, /*^*/</span></p><p class="c1"><span class="c0">&nbsp; 0x01, 0x01, 0x01, 0x01, 0x01, /*_*/</span></p><p class="c1"><span class="c0">&nbsp; 0x80, 0x40, 0x20, 0x00, 0x00, /*`*/</span></p><p class="c1"><span class="c0">&nbsp; 0x04, 0x2A, 0x2A, 0x2A, 0x1E, /*a*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x12, 0x22, 0x22, 0x1C, /*b*/</span></p><p class="c1"><span class="c0">&nbsp; 0x1C, 0x22, 0x22, 0x22, 0x14, /*c*/</span></p><p class="c1"><span class="c0">&nbsp; 0x1C, 0x22, 0x22, 0x12, 0xFE, /*d*/</span></p><p class="c1"><span class="c0">&nbsp; 0x1C, 0x2A, 0x2A, 0x2A, 0x18, /*e*/</span></p><p class="c1"><span class="c0">&nbsp; 0x10, 0x7E, 0x90, 0x80, 0x40, /*f*/</span></p><p class="c1"><span class="c0">&nbsp; 0x18, 0x25, 0x25, 0x25, 0x1E, /*g*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x10, 0x10, 0x10, 0x0E, /*h*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x12, 0x5E, 0x02, 0x00, /*i*/</span></p><p class="c1"><span class="c0">&nbsp; 0x02, 0x01, 0x01, 0x11, 0x5E, /*j*/</span></p><p class="c1"><span class="c0">&nbsp; 0xFE, 0x08, 0x08, 0x14, 0x22, /*k*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x82, 0xFE, 0x02, 0x00, /*l*/</span></p><p class="c1"><span class="c0">&nbsp; 0x3E, 0x20, 0x1C, 0x20, 0x1E, /*m*/</span></p><p class="c1"><span class="c0">&nbsp; 0x3E, 0x20, 0x20, 0x20, 0x1E, /*n*/</span></p><p class="c1"><span class="c0">&nbsp; 0x1C, 0x22, 0x22, 0x22, 0x1C, /*o*/</span></p><p class="c1"><span class="c0">&nbsp; 0x3F, 0x24, 0x24, 0x24, 0x18, /*p*/</span></p><p class="c1"><span class="c0">&nbsp; 0x18, 0x24, 0x24, 0x3F, 0x01, /*q*/</span></p><p class="c1"><span class="c0">&nbsp; 0x3E, 0x10, 0x20, 0x20, 0x10, /*r*/</span></p><p class="c1"><span class="c0">&nbsp; 0x12, 0x2A, 0x2A, 0x2A, 0x04, /*s*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x10, 0x3C, 0x12, 0x04, /*t*/</span></p><p class="c1"><span class="c0">&nbsp; 0x3C, 0x02, 0x02, 0x02, 0x3E, /*u*/</span></p><p class="c1"><span class="c0">&nbsp; 0x30, 0x0C, 0x02, 0x0C, 0x30, /*v*/</span></p><p class="c1"><span class="c0">&nbsp; 0x38, 0x06, 0x18, 0x06, 0x38, /*w*/</span></p><p class="c1"><span class="c0">&nbsp; 0x22, 0x14, 0x08, 0x14, 0x22, /*x*/</span></p><p class="c1"><span class="c0">&nbsp; 0x38, 0x05, 0x05, 0x05, 0x3E, /*y*/</span></p><p class="c1"><span class="c0">&nbsp; 0x22, 0x26, 0x2A, 0x32, 0x22, /*z*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x10, 0x6C, 0x82, 0x82, /*{*/</span></p><p class="c1"><span class="c0">&nbsp; 0x00, 0x00, 0xFF, 0x00, 0x00, /*|*/</span></p><p class="c1"><span class="c0">&nbsp; 0x04, 0x02, 0xFF, 0x02, 0x04, /*|, arrow*/</span></p><p class="c1"><span class="c0">&nbsp; 0x82, 0x82, 0x6C, 0x10, 0x00, /*}*/</span></p><p class="c1"><span class="c0">&nbsp; 0x08, 0x10, 0x18, 0x08, 0x10 /*~*/</span></p><p class="c1"><span class="c0">};</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">int strlen(const unsigned char * string) {</span></p><p class="c1"><span class="c0">&nbsp; int counter = 0;</span></p><p class="c1"><span class="c0">&nbsp; int myChar = 0;</span></p><p class="c1"><span class="c0">&nbsp; do {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; // read back a char</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; myChar = &nbsp;pgm_read_byte_near(string + counter);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; counter++;</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; while (myChar != 0);</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; return (counter);</span></p><p class="c1"><span class="c0">}</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">void setup() {</span></p><p class="c1"><span class="c0">&nbsp; Serial.begin(9600); //we also set the normal serial link, for debug</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; //matrix modules init</span></p><p class="c1"><span class="c0">&nbsp; for (int adresse = 0; adresse &lt; MatrixNumber; adresse++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; /*The MAX72XX is in power-saving mode on startup*/</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; lc.shutdown(adresse, false);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; /* Set the brightness to a medium values */</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; lc.setIntensity(adresse, 4);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; /* and clear the display */</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; lc.clearDisplay(adresse);</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; if ((LongueurChaine + 2 * &nbsp;MatrixNumber) * 6 &gt; BufferLen) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; Serial.println(&quot;WARNING ! message trop long, coupe\n&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; LongueurChaine = (BufferLen / 6) + 2 * MatrixNumber ;</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; BufferBuilding(scrollText, LongueurChaine); &nbsp; //first message on the led screen</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; //we sent a message on the serial port...</span></p><p class="c1"><span class="c0">&nbsp; Serial.println(&quot;Hi ! I&#39;m waiting for a message. Type it and press SEND.&quot;);</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">}</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">void loop() {</span></p><p class="c1"><span class="c0">&nbsp; DrawText( LongueurChaine); //draw the message, in a loop</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; //or, if we get something on the virtual bluetooth port...</span></p><p class="c1"><span class="c0">&nbsp; if (Serial.available() &gt; 3) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; char cmd1 = &#39; &#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; char cmd2 = &#39; &#39;;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; int len = 0;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; cmd1 = Serial.read();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; cmd2 = Serial.read();</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (cmd2 == &#39;:&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; len = Serial.available() ; //incoming string lenght</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // change le message qui doit apparaitre</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; if (cmd1 == &#39;m&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; RememberK = 0; // la chaine a afficher a changer donc on recommence a 0 le defilement</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; for &nbsp;(int i = 0; i &lt; len ; i++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // read the incoming byte:</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; incomingByte = Serial.read();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Phrase[i] = incomingByte; ///store the character into the string array</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } // fin for i</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; len &nbsp;= len &nbsp;- 1;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; LongueurChaine = len;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Serial.print(Phrase);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; //buffers cleaning, to store the new message</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; for (int k = 0; k &lt; BufferLen; k++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Buffer[k] = 0;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } // fin for K</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; //we create the new buffers, so the new message will be drawn when leaving the sub</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; BufferBuilding(Phrase, LongueurChaine);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }// fin if cmd=&#39;m&#39;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // change la luminosite</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; else if (cmd1 == &#39;l&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; incomingByte = Serial.read();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // ignore le reste des caracteres</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; for &nbsp;(int i = 0; i &lt; len - 1 ; i++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // read the incoming byte:</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.read();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } &nbsp;// fi &nbsp;For I</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if ( incomingByte == &#39;0&#39; || incomingByte == &#39;1&#39; || incomingByte == &#39;2&#39; || incomingByte == &#39;3&#39; || incomingByte == &#39;4&#39; || incomingByte == &#39;5&#39; || incomingByte == &#39;6&#39; || incomingByte == &#39;7&#39; || incomingByte == &#39;8&#39; || incomingByte == &#39;9&#39; ) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.print(&quot;l:&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(incomingByte);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(&quot;L&#39;intensite &nbsp;doit etre comprise entre 0 et 9&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; for (int adresse = 0; adresse &lt; MatrixNumber; adresse++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lc.setIntensity(adresse , incomingByte - &#39;0&#39;) ;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } // fin FOR</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }// fin if cmd=&#39;l&#39;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // change la vitesse de defilement</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; else if (cmd1 == &#39;v&#39;) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; incomingByte = Serial.read();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; // ignore le reste des caracteres</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; for &nbsp;(int i = 0; i &lt; len - 1 &nbsp;; i++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // read the incoming byte:</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.read();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; } &nbsp;// fi &nbsp;For I</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; if ( incomingByte == &#39;0&#39; || incomingByte == &#39;1&#39; || incomingByte == &#39;2&#39; || incomingByte == &#39;3&#39; || incomingByte == &#39;4&#39; || incomingByte == &#39;5&#39; || incomingByte == &#39;6&#39; || incomingByte == &#39;7&#39; || incomingByte == &#39;8&#39; || incomingByte == &#39;9&#39; ) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SpeedDelay = (9 - (incomingByte - &#39;0&#39;)) * 100;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.print(&quot;v:&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(SpeedDelay);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; else {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(&quot;La vitesse doit etre comprise entre 0 et 9&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; } // fin if cmd=&#39;v&#39;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; } // fin cmd2==&#39;:&#39;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; else { // vide le contenue de serie qui n&#39;est pas bon</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; while ( Serial.available() &gt; 0) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Serial.read();</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Serial.println(&quot;vide&quot;);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; } // fin While</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; } // fin ELSE</span></p><p class="c1"><span class="c0">&nbsp; } // fin IF Serial</span></p><p class="c1"><span class="c0">}</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">void BufferBuilding(char * stringToDisplay, byte stringLength)</span></p><p class="c1"><span class="c0">{</span></p><p class="c1"><span class="c0">&nbsp; int i = 0;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // commence par des blancs pour &nbsp;que le message commence par la droite m&ecirc;me pour les &#39;MatrixNumber&#39; &nbsp;premieres lettres</span></p><p class="c1"><span class="c0">&nbsp; for (i = 0; i &lt; (8 * MatrixNumber) - 1; i++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; Buffer[i] = &nbsp;B00000000; &nbsp;//one blank column of leds between two characters</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // PAS propre, Mais seul moyen pour &eacute;conomiser la m&eacute;moire car pas possible d&#39;ajouter des blanc dans la chaine source sans prendre beaucoup de m&eacute;moire</span></p><p class="c1"><span class="c0">&nbsp; LongueurChaine = LongueurChaine &nbsp;+ MatrixNumber;</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; //loop on every characters (on the string)</span></p><p class="c1"><span class="c0">&nbsp; for (int k = 0; k &lt; stringLength; k++) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; //here we call the characters library</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; int caract = k;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; Buffer[i + 0] = &nbsp;fontDefinitions[((stringToDisplay[caract] - 32) * 5) + 0];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; Buffer[i + 1] = &nbsp;fontDefinitions[((stringToDisplay[caract] - 32) * 5) + 1];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; Buffer[i + 2] = &nbsp;fontDefinitions[((stringToDisplay[caract] - 32) * 5) + 2];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; Buffer[i + 3] = &nbsp;fontDefinitions[((stringToDisplay[caract] - 32) * 5) + 3];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; Buffer[i + 4] = &nbsp;fontDefinitions[((stringToDisplay[caract] - 32) * 5) + 4];</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; Buffer[i + 5] = &nbsp;B00000000; //one blank column of leds between two characters</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; i = i + 6;</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; // here, we create a second buffer, to display the message on the switched matrixes</span></p><p class="c1"><span class="c0">&nbsp; //for(int k = 0; k &lt; stringLength*6; k++) {</span></p><p class="c1"><span class="c0">&nbsp; // &nbsp; &nbsp;for(int i = 0; i &lt; 8; i++) {</span></p><p class="c1"><span class="c0">&nbsp; // &nbsp; &nbsp; &nbsp; &nbsp;bitWrite( &nbsp;Buffer_inverse[k] ,i, &nbsp;bitRead(Buffer[k] ,7-i) ) &nbsp; ;</span></p><p class="c1"><span class="c0">&nbsp; /// &nbsp; &nbsp;}</span></p><p class="c1"><span class="c0">&nbsp; //}</span></p><p class="c1"><span class="c0">}</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">void DrawText( byte stringLength) {</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; for (int k = RememberK; k &lt; stringLength * 6; k++) {</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; if (Serial.available() &gt; 0) {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; RememberK = k;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; return;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; delay(SpeedDelay);</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; //k is the column</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; //buffer drawing</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; for (int m = 0; m &lt; MatrixNumber; m++) { &nbsp;//loop on the matrix</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //if (m % 2 == &nbsp;0) //check is the module is upside-down or not...</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //here, the matrix is flipped upside-down</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; for (int i = 0; i &lt; 8; i++) { &nbsp;//loop on the columns</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; lc.setRow(m, 7 - i, Buffer[i + k + 8 * m]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //else</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &nbsp; &nbsp;//classical</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &nbsp; &nbsp;for (int i = 0; i &lt; 8; i++) { &nbsp;//loop on the columns</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lc.setRow(m,i,Buffer_inverse[i+k+8*m]);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; // &nbsp; &nbsp;}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; //}</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1 c5"><span class="c0"></span></p><p class="c1"><span class="c0">}</span></p><p class="c16 c5 c21"><span class="c0"></span></p></td></tr></tbody></table><p class="c3"><span class="c23 c27"></span></p><p class="c3"><span class="c23"></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p><p class="c3"><span></span></p></body></html>